/**
 * Android PWA Fullscreen Mode CSS
 * CRITICAL: These styles ensure true fullscreen mode on Android tablets
 *
 * Problem: Android PWA shows bottom gap below app content
 * Solution: Use viewport units that account for navigation bars + force stretching
 */

/* Android PWA Detection - Apply styles only when running as installed PWA on Android */
/* Use @supports to detect Android (excludes iOS which uses -webkit-touch-callout) */
@supports not (-webkit-touch-callout: none) {
  @media (display-mode: fullscreen), (display-mode: standalone) {
  /* Android-specific fullscreen fixes */
  html {
    /* CRITICAL: Use svh (small viewport height) to fill entire screen including nav bar area */
    height: 100svh !important; /* Small viewport = smallest possible (nav bar visible) */
    min-height: 100svh !important;
    width: 100vw !important;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden;
    margin: 0;
    padding: 0;
  }

  body {
    /* Ensure body stretches to fill entire screen - NO GAPS */
    height: 100svh !important;
    min-height: 100svh !important;
    width: 100vw !important;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden;
    margin: 0;
    padding: 0;
    /* Android Chrome - prevent overscroll and elastic bounce */
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }

  /* Root app container - ensure proper fullscreen layout with NO bottom gap */
  #__next,
  #root {
    height: 100svh !important;
    min-height: 100svh !important;
    width: 100vw !important;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    margin: 0;
    padding: 0;
    /* Hide Android's pull-to-refresh in PWA mode */
    overscroll-behavior-y: contain;
  }

    /* All content containers should stretch to fill */
    main,
    [role="main"],
    .app-container {
      min-height: 100svh !important;
    }
  }

  /* Additional Android fullscreen enforcement */
  @media (display-mode: fullscreen) {
    html,
    body {
      /* CRITICAL: Absolute positioning to eliminate gaps */
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* Prevent bouncing/elastic scrolling on Android */
    body {
      overscroll-behavior: none !important;
      -webkit-overflow-scrolling: touch;
    }

    #__next,
    #root {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      height: 100% !important;
    }
  }

  /* Android tablet landscape mode optimization */
  @media (display-mode: fullscreen), (display-mode: standalone) {
    @media (orientation: landscape) and (min-width: 768px) {
      html,
      body {
        /* Ensure proper fullscreen in landscape */
        height: 100svh !important;
        min-height: 100svh !important;
      }
    }
  }

  /* Android - Prevent zoom on input focus */
  @media (max-width: 1024px) {
    input,
    textarea,
    select {
      font-size: 16px !important; /* Prevents zoom on Android */
    }
  }

  /* Debug helper - shows green border when Android PWA mode is active */
  @media (display-mode: fullscreen), (display-mode: standalone) {
    body::before {
      content: "PWA Fullscreen Active";
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 255, 0, 0.8);
      color: black;
      padding: 4px 12px;
      font-size: 10px;
      z-index: 999999;
      border-radius: 0 0 8px 8px;
      pointer-events: none;
      opacity: 0;
      animation: debug-flash 3s ease-in-out;
    }
  }

  @keyframes debug-flash {
    0% {
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
}
