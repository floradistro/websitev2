import {a}from'./chunk-NKCR7VPO.js';import {a as a$1}from'./chunk-XR65N6EG.js';var s=class{constructor(t=a,e=a$1,r=globalThis.fetch.bind(globalThis)){this.sdk=t,this.logger=e,this.fetch=r;}get workerCommand(){var t;return (t=this.sdk.mainDataCaptureLoader)==null?void 0:t.workerCommand.bind(this.sdk.mainDataCaptureLoader)}async getLicenseText(){var o,i;if(this.sdk.configurePhase!=="done")return this.logger.warn('You must call "configure" before retrieving open source license text info.'),"";let t=new URL(`${((o=this.sdk.libraryLocation)!=null?o:"").replace(/\/$/,"")}/license/web-core-license.txt`),[e,r]=await Promise.all([(i=this.workerCommand)==null?void 0:i.call(this,"getOpenSourceSoftwareLicenseInfo",{}),this.fetchWebLicenseText(t.toString())]);return [e==null?void 0:e.licenseText,r].filter(l=>l!=null).join(`
`)}async fetchWebLicenseText(t){return this.fetch(t,{mode:"cors",credentials:"include",headers:{"Content-Type":"text/plain"}}).then(async e=>{if(!e.ok)throw new Error(`${e.status} ${e.statusText}`);return e.text()}).catch(e=>(this.logger.warn(`Failed to fetch license from ${t}: ${e.toString()}`),null))}};export{s as a};